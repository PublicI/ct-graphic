<script type="text/javascript" src="https://code.highcharts.com/highcharts.js"></script>
<script type="text/javascript" src="indexed-means.json"></script>

<div id="chart" style="min-width: 400px; height: 400px; margin: 0 auto;margin-bottom:20px"></div>
<p style="font-size:80%;color:#666">Source: Center for Public Integrity analysis of Internal Revenue Service documents.</p>

<script>

function loadData() {
    var mydata = JSON.parse(data);
    console.log(mydata[0].index);
    return mydata[0]
}

function makeSeries(mydata){
    var tar = []
    for (var i = 0; i < mydata.index.length; i++) {
        series_i = {}
        series_i.name = mydata.index[i]
        series_i.data = mydata.data[i]
        tar.push(series_i)
    }
    return tar
}

console.log(data)
d = loadData()
dSeries = makeSeries(d)

var chart = Highcharts.chart('chart', {
    colors: ['red','#ff6100','#ff9900','rgb(150,150,150)'],
    title: {
        display:'null',
        text: ' ',
        x: -20 //center
    },
    subtitle: {
        display:'null',
        text: ' ',
        x: -20
    },
    credits: {
        enabled: false
},
    xAxis: {
        labels: {
            style: {
                fontSize: '10px',
            }
        },
        categories: d.columns
    },
    yAxis: {

        title: {
            text: '% Change in income since 2007'
        },
        labels: {
            formatter: function () {
                return Highcharts.numberFormat(this.value, 0)+'%'}
                // step: 2
            },
        plotLines: [{
            value: 0,
            width: 1,
            color: '#808080'
        }]
    },
    tooltip: {
          valuePrefix: '$'
    },
    legend: {
       enabled: true,
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'middle',
        borderWidth: 0
    },
    series: dSeries

});


</script>